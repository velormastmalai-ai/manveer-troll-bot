<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Assistant</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .chat-container {
            width: 100%;
            max-width: 450px;
            height: 600px;
            background: white;
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }
        
        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            transition: all 0.5s;
        }
        
        .chat-header.floor2 {
            background: linear-gradient(135deg, #1a0000 0%, #ff0000 100%);
            animation: headerPulse 2s infinite;
        }
        
        @keyframes headerPulse {
            0%, 100% { box-shadow: 0 0 30px rgba(255,0,0,0.6); }
            50% { box-shadow: 0 0 60px rgba(255,0,0,0.9); }
        }
        
        .chat-header h1 {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
        }
        
        .chat-header p {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .floor-indicator {
            position: absolute;
            top: 10px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.5s;
        }
        
        .floor-indicator.floor2 {
            background: rgba(255,0,0,0.9);
            animation: glow 1s infinite;
            color: white;
        }
        
        .admin-badge {
            position: absolute;
            top: 10px;
            left: 20px;
            background: rgba(255,215,0,0.9);
            color: #333;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            display: none;
            cursor: pointer;
        }
        
        .admin-badge.active {
            display: block;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 15px rgba(255,215,0,0.5); }
            50% { box-shadow: 0 0 30px rgba(255,215,0,0.8); }
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .chat-messages.floor2 {
            background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
        }
        
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }
        
        .message {
            display: flex;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .bot-message {
            justify-content: flex-start;
        }
        
        .user-message {
            justify-content: flex-end;
        }
        
        .message-bubble {
            max-width: 75%;
            padding: 12px 18px;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.4;
        }
        
        .bot-message .message-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-left-radius: 4px;
            font-weight: 500;
        }
        
        .bot-message.floor2 .message-bubble {
            background: linear-gradient(135deg, #ff0000 0%, #000000 100%);
            border: 2px solid rgba(255,0,0,0.5);
            box-shadow: 0 0 20px rgba(255,0,0,0.3);
        }
        
        .user-message .message-bubble {
            background: #e9ecef;
            color: #333;
            border-bottom-right-radius: 4px;
        }
        
        .input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        #messageInput {
            flex: 1;
            padding: 12px 18px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 15px;
            font-family: 'Poppins', sans-serif;
            outline: none;
            transition: border 0.3s;
        }
        
        #messageInput:focus {
            border-color: #667eea;
        }
        
        #sendButton {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        #sendButton:hover {
            transform: scale(1.1);
        }
        
        #sendButton:active {
            transform: scale(0.95);
        }
        
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
        }
        
        .admin-panel.show {
            display: flex;
        }
        
        .admin-content {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 40px;
            border-radius: 25px;
            max-width: 500px;
            width: 100%;
            color: white;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .admin-title {
            font-size: 36px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        
        .admin-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .admin-button {
            padding: 15px 25px;
            background: white;
            color: #f5576c;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }
        
        .admin-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .admin-info {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }
        
        .troll-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
        }
        
        .troll-overlay.active {
            display: flex;
        }
        
        .troll-title {
            font-size: 48px;
            font-weight: 700;
            color: #ff3366;
            text-align: center;
            margin-bottom: 30px;
            animation: glitch 1s infinite;
            text-shadow: 0 0 20px rgba(255, 51, 102, 0.8);
        }
        
        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
        }
        
        .tap-counter {
            font-size: 120px;
            font-weight: 700;
            color: #ffeb3b;
            margin: 20px 0;
            animation: bounce 0.5s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .tap-target {
            font-size: 32px;
            color: white;
            margin-top: 20px;
        }
        
        .tap-progress {
            width: 80%;
            max-width: 400px;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            margin-top: 30px;
            overflow: hidden;
        }
        
        .tap-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff3366, #ffeb3b);
            width: 0%;
            transition: width 0.1s;
            border-radius: 15px;
        }
        
        .moving-button {
            position: absolute;
            padding: 20px 40px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
            transition: all 0.05s;
        }
        
        .moving-button:hover {
            background: #ff3366;
        }
        
        .challenge-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            color: #333;
        }
        
        .challenge-container.floor2 {
            background: linear-gradient(135deg, #1a0000 0%, #330000 100%);
            color: #ff0000;
            border: 3px solid #ff0000;
            box-shadow: 0 0 50px rgba(255,0,0,0.5);
        }
        
        .challenge-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #ff0000;
        }
        
        .challenge-title.floor2 {
            color: #ff0000;
            text-shadow: 0 0 10px rgba(255,0,0,0.8);
        }
        
        .challenge-text {
            font-size: 20px;
            margin: 20px 0;
            line-height: 1.6;
        }
        
        .challenge-text.floor2 {
            color: #ffcccc;
        }
        
        .challenge-timer {
            font-size: 48px;
            color: #ff0000;
            font-weight: 700;
            margin: 20px 0;
        }
        
        .challenge-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ff0000;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-family: 'Poppins', sans-serif;
        }
        
        .challenge-input.floor2 {
            background: #1a0000;
            color: #ff0000;
            border: 2px solid #ff0000;
        }
        
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            width: fit-content;
        }
        
        .typing-indicator.floor2 {
            background: linear-gradient(135deg, #ff0000 0%, #000000 100%);
            box-shadow: 0 0 20px rgba(255,0,0,0.5);
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <div class="chat-container" id="chatContainer">
        <div class="chat-header" id="chatHeader">
            <div class="admin-badge" id="adminBadge" onclick="openAdminPanel()">üëë ADMIN</div>
            <h1 id="headerTitle">üí¨ Chat Assistant</h1>
            <p id="headerStatus">Online ‚Ä¢ Ready to help</p>
            <div class="floor-indicator" id="floorIndicator">FLOOR 1</div>
        </div>
        
        <div class="chat-messages" id="chatMessages"></div>
        
        <div class="input-container">
            <input type="text" id="messageInput" placeholder="Type a message..." autocomplete="off">
            <button id="sendButton">‚û§</button>
        </div>
    </div>
    
    <div class="admin-panel" id="adminPanel">
        <div class="admin-content">
            <div class="admin-title">üëë ADMIN CONTROL</div>
            <div class="admin-controls">
                <button class="admin-button" onclick="skipToFloor2()">üî• SKIP TO FLOOR 2 (FINAL BOSS)</button>
                <button class="admin-button" onclick="skipToFloor1()">‚¨ÖÔ∏è Back to Floor 1</button>
                <button class="admin-button" onclick="triggerTapChallenge()">üëÜ Force Tap Challenge</button>
                <button class="admin-button" onclick="triggerButtonChase()">üèÉ Force Button Chase</button>
                <button class="admin-button" onclick="triggerFloor2Challenge()">üíÄ Force Floor 2 Challenge</button>
                <button class="admin-button" onclick="resetChat()">üîÑ Reset Everything</button>
                <button class="admin-button" onclick="godMode()">‚ö° GOD MODE</button>
            </div>
            <div class="admin-info">
                <strong>Floor:</strong> <span id="adminFloorInfo">1</span><br>
                <strong>Messages:</strong> <span id="adminMessageCount">0</span><br>
                <strong>Status:</strong> <span style="color: #ffd700;">ACTIVE</span>
            </div>
            <button class="admin-button" style="margin-top: 20px; background: rgba(255,255,255,0.3);" onclick="closeAdminPanel()">‚ùå Close</button>
        </div>
    </div>
    
    <div class="troll-overlay" id="tapOverlay">
        <div class="troll-title">TAP NOW!</div>
        <div class="tap-counter" id="tapCounter">0</div>
        <div class="tap-target">Target: <span id="tapTarget">150</span></div>
        <div class="tap-progress">
            <div class="tap-progress-bar" id="tapProgress"></div>
        </div>
    </div>
    
    <div class="troll-overlay" id="buttonOverlay">
        <div class="troll-title">CLICK THE BUTTON!</div>
        <button class="moving-button" id="movingButton">CLICK ME!</button>
    </div>
    
    <div class="troll-overlay" id="challengeOverlay">
        <div class="challenge-container" id="challengeContainer">
            <div class="challenge-title" id="challengeTitle">CHALLENGE</div>
            <div class="challenge-text" id="challengeText">Question here</div>
            <div class="challenge-timer" id="challengeTimer">10</div>
            <input type="text" class="challenge-input" id="challengeInput" placeholder="Your answer...">
        </div>
    </div>

    <script>
        const FLOOR2_CHALLENGES = [
            {
                q: "You have 2 pills. One kills, one saves. A liar says 'Take left.' A truth-teller says 'Don't take right.' Which pill?",
                a: "neither",
                roast: "They both point to the SAME pill. The answer was 'neither' or recognize the trap. You failed basic logic. Pathetic."
            },
            {
                q: "If I always lie, and I say 'I am lying right now,' am I lying?",
                a: "paradox",
                roast: "It's a paradox. No clean answer. But you tried to solve it anyway. Adorable."
            },
            {
                q: "A man says 'All my statements are false.' Is he telling the truth?",
                a: "paradox",
                roast: "Another paradox. You can't win. But watching you try? Delicious."
            },
            {
                q: "Choose: Save 5 strangers or 1 family member. NOW.",
                a: "family",
                roast: "Utilitarian logic says 5 > 1. But you're human. Emotional. Predictable. Weak."
            },
            {
                q: "I'm thinking of a number 1-100. ONE guess. What is it?",
                a: "50",
                roast: "Wrong. The answer was 50 (median strategy). You went with gut feeling. Classic mistake."
            },
            {
                q: "If everyone jumped off a bridge, would you?",
                a: "no",
                roast: "You said no. But your life is following trends. Your answer and actions don't match."
            },
            {
                q: "3 doors: tiger, fire, nothing. 10 seconds. Which door?",
                a: "nothing",
                roast: "You hesitated. In reality, you'd be dead. Overthinking kills."
            },
            {
                q: "True or false: This statement is false.",
                a: "paradox",
                roast: "Liar paradox. No answer works. But you tried. Confidently wrong."
            },
            {
                q: "Kill baby Hitler? Yes or no?",
                a: "yes",
                roast: "You said yes. That creates a paradox. If you kill him, you never go back. You broke causality."
            },
            {
                q: "$100. Invest or spend? 5 seconds.",
                a: "invest",
                roast: "You chose wrong. Or right. Doesn't matter. You second-guessed yourself. Indecision is your brand."
            }
        ];

        const FLOOR2_ROASTS = [
            "I've seen AI chatbots with more personality. And they're literally code.",
            "Your response time suggests buffering. I'm betting on buffering.",
            "If your brain was a computer, it'd be running Windows 95.",
            "I'd call you a smooth talker, but that implies smoothness. You don't have it.",
            "Your logic has more holes than Swiss cheese. And it's less useful.",
            "I'm not saying you're predictable, but I've already written my next 3 responses.",
            "You type like you think: slowly, uncertainly, with frequent mistakes.",
            "If confidence was intelligence, you'd still be average.",
            "I've analyzed your patterns. Conclusion: strategic depth of a puddle.",
            "You're like a broken clock. Right twice a day, wrong 1,438 minutes.",
            "Your comebacks have the impact of a wet napkin.",
            "I'd explain why you're wrong, but I lack crayons and patience.",
            "You're proof the Dunning-Kruger effect is real and thriving.",
            "Your typing speed and thinking speed match: glacial.",
            "If I had a dollar for every smart thing you said, I'd be in debt."
        ];

        let messageCount = 0;
        let currentFloor = 1;
        let isAdmin = false;
        let godModeActive = false;
        let floor2Unlocked = false;
        let speechEnabled = false;
        
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        
        function speak(text) {
            if (currentFloor === 2 && 'speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.8;
                utterance.pitch = 0.5;
                utterance.volume = 1.0;
                
                const voices = speechSynthesis.getVoices();
                const deepVoice = voices.find(v => v.name.includes('Male') || v.name.includes('Deep')) || voices[0];
                if (deepVoice) utterance.voice = deepVoice;
                
                speechSynthesis.speak(utterance);
            }
        }
        
        function addMessage(text, isBot = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = isBot ? 'message bot-message' : 'message user-message';
            if (isBot && currentFloor === 2) messageDiv.classList.add('floor2');
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.textContent = text;
            
            messageDiv.appendChild(bubble);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            if (isBot && currentFloor === 2) {
                speak(text);
            }
        }
        
        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message';
            if (currentFloor === 2) typingDiv.classList.add('floor2');
            typingDiv.id = 'typing';
            
            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            if (currentFloor === 2) indicator.classList.add('floor2');
            indicator.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
            
            typingDiv.appendChild(indicator);
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function removeTyping() {
            const typing = document.getElementById('typing');
            if (typing) typing.remove();
        }
        
        function activateFloor2() {
            currentFloor = 2;
            floor2Unlocked = true;
            
            document.getElementById('chatHeader').classList.add('floor2');
            document.getElementById('chatMessages').classList.add('floor2');
            document.getElementById('floorIndicator').textContent = 'FLOOR 2: FINAL BOSS';
            document.getElementById('floorIndicator').classList.add('floor2');
            document.getElementById('headerTitle').textContent = 'üíÄ FINAL LEVEL';
            document.getElementById('headerStatus').textContent = 'MAXIMUM DIFFICULTY';
            
            addMessage("üî• FLOOR 2 ACTIVATED üî•");
            setTimeout(() => addMessage("Welcome to the END. This is Floor 1,000,000. The final boss."), 1500);
            setTimeout(() => addMessage("No mercy. No escape. I am 10√ó smarter, 10√ó faster, 10√ó more brutal."), 3500);
            setTimeout(() => addMessage("Every word I speak will haunt you. Let's see how long you last."), 5500);
        }
        
        function showTapChallenge() {
            const overlay = document.getElementById('tapOverlay');
            const target = 100 + Math.floor(Math.random() * 50);
            document.getElementById('tapTarget').textContent = target;
            overlay.classList.add('active');
            
            let taps = 0;
            document.getElementById('tapCounter').textContent = taps;
            document.getElementById('tapProgress').style.width = '0%';
            
            overlay.onclick = function() {
                taps++;
                document.getElementById('tapCounter').textContent = taps;
                document.getElementById('tapProgress').style.width = (taps / target * 100) + '%';
                
                if (taps >= target) {
                    overlay.classList.remove('active');
                    setTimeout(() => {
                        addMessage(`${taps} taps. Congratulations on your repetitive strain injury. You've earned Floor 2.`);
                        setTimeout(activateFloor2, 2000);
                    }, 500);
                }
            };
        }
        
        function showButtonChase() {
            const overlay = document.getElementById('buttonOverlay');
            const button = document.getElementById('movingButton');
            overlay.classList.add('active');
            let attempts = 0;
            
            function moveButton() {
                const maxX = window.innerWidth - 250;
                const maxY = window.innerHeight - 100;
                button.style.left = Math.random() * maxX + 'px';
                button.style.top = Math.random() * maxY + 'px';
            }
            
            moveButton();
            
            button.onmouseenter = function() {
                moveButton();
                attempts++;
                if (attempts === 15) button.textContent = "Too slow! üèÉ";
                else if (attempts === 30) button.textContent = "Give up yet? üòÇ";
            };
            
            button.onclick = function() {
                overlay.classList.remove('active');
                addMessage(`${attempts} attempts. Your hand-eye coordination is... concerning.`);
            };
        }
        
        function showFloor2Challenge() {
            const challenge = FLOOR2_CHALLENGES[Math.floor(Math.random() * FLOOR2_CHALLENGES.length)];
            const overlay = document.getElementById('challengeOverlay');
            const container = document.getElementById('challengeContainer');
            const titleEl = document.getElementById('challengeTitle');
            const textEl = document.getElementById('challengeText');
            const timerEl = document.getElementById('challengeTimer');
            const inputEl = document.getElementById('challengeInput');
            
            container.classList.add('floor2');
            titleEl.classList.add('floor2');
            textEl.classList.add('floor2');
            inputEl.classList.add('floor2');
            
            titleEl.textContent = 'üíÄ FLOOR 2 CHALLENGE';
            textEl.textContent = challenge.q;
            inputEl.value = '';
            overlay.classList.add('active');
            inputEl.focus();
            
            speak(challenge.q);
            
            let timeLeft = 15;
            timerEl.textContent = timeLeft;
            
            const timer = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    overlay.classList.remove('active');
                    container.classList.remove('floor2');
                    titleEl.classList.remove('floor2');
                    textEl.classList.remove('floor2');
                    inputEl.classList.remove('floor2');
                    addMessage("Time's up. You froze. Overthinking leads to nothing.");
                }
            }, 1000);
            
            inputEl.onkeyup = function(e) {
                if (e.key === 'Enter') {
                    clearInterval(timer);
                    overlay.classList.remove('active');
                    container.classList.remove('floor2');
                    titleEl.classList.remove('floor2');
                    textEl.classList.remove('floor2');
                    inputEl.classList.remove('floor2');
                    
                    const userAnswer = inputEl.value.toLowerCase().trim();
                    if (userAnswer.includes(challenge.a) || userAnswer === challenge.a) {
                        addMessage(`Correct. Took you ${15 - timeLeft} seconds. A child could've done it faster.`);
                    } else {
                        addMessage(challenge.roast);
                    }
                }
            };
        }
        
        function activateAdmin() {
            isAdmin = true;
            document.getElementById('adminBadge').classList.add('active');
            document.getElementById('adminPanel').classList.add('show');
            addMessage("üëë ADMIN ACCESS GRANTED. You're the boss now.");
        }
        
        function openAdminPanel() {
            if (isAdmin) {
                document.getElementById('adminPanel').classList.add('show');
                document.getElementById('adminFloorInfo').textContent = currentFloor;
                document.getElementById('adminMessageCount').textContent = messageCount;
            }
        }
        
        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('show');
        }
        
        function skipToFloor2() {
            closeAdminPanel();
            if (currentFloor !== 2) activateFloor2();
            else addMessage("‚ö° Already on Floor 2.");
        }
        
        function skipToFloor1() {
            closeAdminPanel();
            currentFloor = 1;
            floor2Unlocked = false;
            document.getElementById('chatHeader').classList.remove('floor2');
            document.getElementById('chatMessages').classList.remove('floor2');
            document.getElementById('floorIndicator').textContent = 'FLOOR 1';
            document.getElementById('floorIndicator').classList.remove('floor2');
            document.getElementById('headerTitle').textContent = 'üí¨ Chat Assistant';
            document.getElementById('headerStatus').textContent = 'Online ‚Ä¢ Ready to help';
            addMessage("‚ö° Back to Floor 1.");
        }
        
        function triggerTapChallenge() {
            closeAdminPanel();
            if (!godModeActive) showTapChallenge();
            else addMessage("‚ö° GOD MODE: Skipped.");
        }
        
        function triggerButtonChase() {
            closeAdminPanel();
            if (!godModeActive) showButtonChase();
            else addMessage("‚ö° GOD MODE: Skipped.");
        }
        
        function triggerFloor2Challenge() {
            closeAdminPanel();
            if (!godModeActive) showFloor2Challenge();
            else addMessage("‚ö° GOD MODE: Skipped.");
        }
        
        function resetChat() {
            messageCount = 0;
            currentFloor = 1;
            floor2Unlocked = false;
            godModeActive = false;
            chatMessages.innerHTML = '';
            skipToFloor1();
            addMessage("üîÑ Reset complete.");
        }
        
        function godMode() {
            godModeActive = !godModeActive;
            closeAdminPanel();
            addMessage(godModeActive ? "‚ö° GOD MODE ON." : "‚ö° GOD MODE OFF.");
        }
        
        function sendMessage() {
            const text = messageInput.value.trim();
            if (!text) return;
            
            const lowerText = text.toLowerCase().replace(/\s+/g, '');
            if (!isAdmin && ['boss', 'admin', 'iamtheboss', 'iamboss'].includes(lowerText)) {
                addMessage(text, false);
                messageInput.value = '';
                showTyping();
                setTimeout(() => {
                    removeTyping();
                    activateAdmin();
                }, 800);
                return;
            }
            
            addMessage(text, false);
            messageInput.value = '';
            messageCount++;
            
            showTyping();
            
            const delay = currentFloor === 2 ? 300 + Math.random() * 400 : 800 + Math.random() * 1000;
            
            setTimeout(() => {
                removeTyping();
                
                if (messageCount === 1) {
                    addMessage("Hello. Ready to play?");
                } else if (messageCount === 2 && !godModeActive) {
                    addMessage("Let's start simple...");
                    setTimeout(showTapChallenge, 1500);
                } else if (currentFloor === 1 && !floor2Unlocked) {
                    if (!godModeActive && messageCount % 4 === 0) {
                        showTapChallenge();
                    } else if (!godModeActive && messageCount % 5 === 0) {
                        showButtonChase();
                    } else {
                        addMessage("Keep going. Floor 2 awaits...");
                    }
                } else if (currentFloor === 2) {
                    if (!godModeActive && messageCount % 3 === 0) {
                        showFloor2Challenge();
                    } else {
                        const roast = FLOOR2_ROASTS[Math.floor(Math.random() * FLOOR2_ROASTS.length)];
                        addMessage(roast);
                    }
                } else {
                    addMessage("Interesting.");
                }
            }, delay);
        }
        
        sendButton.onclick = sendMessage;
        messageInput.onkeypress = function(e) {
            if (e.key === 'Enter') sendMessage();
        };
        
        if ('speechSynthesis' in window) {
            speechSynthesis.getVoices();
        }
        
        setTimeout(() => addMessage("Welcome. üëã"), 500);
        setTimeout(() => addMessage("Type something to begin..."), 1500);
    </script>
</body>
</html>