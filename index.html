<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Assistant</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Creepster&family=Poppins:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .chat-container {
            width: 100%;
            max-width: 450px;
            height: 600px;
            background: white;
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }
        
        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            transition: all 0.5s;
        }
        
        .chat-header.floor2 {
            background: linear-gradient(135deg, #0a0000 0%, #8b0000 100%);
            animation: headerPulse 1.5s infinite, shake 0.3s infinite;
        }
        
        @keyframes headerPulse {
            0%, 100% { box-shadow: 0 0 40px rgba(139,0,0,0.8), inset 0 0 20px rgba(255,0,0,0.3); }
            50% { box-shadow: 0 0 80px rgba(255,0,0,1), inset 0 0 40px rgba(255,0,0,0.6); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-1px, 1px) rotate(-0.5deg); }
            50% { transform: translate(1px, -1px) rotate(0.5deg); }
            75% { transform: translate(-1px, -1px) rotate(-0.5deg); }
        }
        
        .chat-header h1 {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
        }
        
        .chat-header.floor2 h1 {
            font-family: 'Creepster', cursive;
            font-size: 28px;
            animation: glitch 2s infinite;
        }
        
        .chat-header p {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .floor-indicator {
            position: absolute;
            top: 10px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.5s;
        }
        
        .floor-indicator.floor2 {
            background: rgba(139,0,0,0.9);
            animation: glow 1s infinite;
            color: #ff0000;
            font-family: 'Creepster', cursive;
        }
        
        .admin-badge {
            position: absolute;
            top: 10px;
            left: 20px;
            background: rgba(255,215,0,0.9);
            color: #333;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            display: none;
            cursor: pointer;
        }
        
        .admin-badge.active {
            display: block;
            animation: glow 2s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255,0,0,0.6); }
            50% { box-shadow: 0 0 40px rgba(255,0,0,1); }
        }
        
        @keyframes glitch {
            0%, 90%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); text-shadow: 2px 2px #ff0000, -2px -2px #00ff00; }
            40% { transform: translate(-2px, -2px); text-shadow: -2px 2px #ff0000, 2px -2px #00ff00; }
            60% { transform: translate(2px, 2px); text-shadow: 2px -2px #ff0000, -2px 2px #00ff00; }
            80% { transform: translate(2px, -2px); text-shadow: -2px -2px #ff0000, 2px 2px #00ff00; }
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .chat-messages.floor2 {
            background: linear-gradient(180deg, #000000 0%, #1a0000 50%, #000000 100%);
            animation: backgroundPulse 3s infinite;
        }
        
        @keyframes backgroundPulse {
            0%, 100% { background: linear-gradient(180deg, #000000 0%, #1a0000 50%, #000000 100%); }
            50% { background: linear-gradient(180deg, #0a0000 0%, #2a0000 50%, #0a0000 100%); }
        }
        
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }
        
        .message {
            display: flex;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .bot-message {
            justify-content: flex-start;
        }
        
        .user-message {
            justify-content: flex-end;
        }
        
        .message-bubble {
            max-width: 75%;
            padding: 12px 18px;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.4;
        }
        
        .bot-message .message-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-left-radius: 4px;
            font-weight: 500;
        }
        
        .bot-message.floor2 .message-bubble {
            background: linear-gradient(135deg, #8b0000 0%, #000000 100%);
            border: 2px solid #ff0000;
            box-shadow: 0 0 30px rgba(255,0,0,0.5), inset 0 0 20px rgba(139,0,0,0.3);
            animation: messagePulse 2s infinite;
            font-family: 'Creepster', cursive;
            font-size: 16px;
        }
        
        @keyframes messagePulse {
            0%, 100% { box-shadow: 0 0 30px rgba(255,0,0,0.5), inset 0 0 20px rgba(139,0,0,0.3); }
            50% { box-shadow: 0 0 50px rgba(255,0,0,0.8), inset 0 0 30px rgba(139,0,0,0.5); }
        }
        
        .user-message .message-bubble {
            background: #e9ecef;
            color: #333;
            border-bottom-right-radius: 4px;
        }
        
        .input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        #messageInput {
            flex: 1;
            padding: 12px 18px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 15px;
            font-family: 'Poppins', sans-serif;
            outline: none;
            transition: border 0.3s;
        }
        
        #messageInput:focus {
            border-color: #667eea;
        }
        
        #sendButton {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        #sendButton:hover {
            transform: scale(1.1);
        }
        
        #sendButton:active {
            transform: scale(0.95);
        }
        
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
        }
        
        .admin-panel.show {
            display: flex;
        }
        
        .admin-content {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 40px;
            border-radius: 25px;
            max-width: 500px;
            width: 100%;
            color: white;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .admin-title {
            font-size: 36px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        
        .admin-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .admin-button {
            padding: 15px 25px;
            background: white;
            color: #f5576c;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }
        
        .admin-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .admin-info {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
        }
        
        .troll-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
        }
        
        .troll-overlay.active {
            display: flex;
        }
        
        .troll-overlay.floor2 {
            background: radial-gradient(circle, rgba(139,0,0,0.3) 0%, rgba(0,0,0,0.98) 100%);
            animation: overlayPulse 2s infinite;
        }
        
        @keyframes overlayPulse {
            0%, 100% { background: radial-gradient(circle, rgba(139,0,0,0.3) 0%, rgba(0,0,0,0.98) 100%); }
            50% { background: radial-gradient(circle, rgba(139,0,0,0.5) 0%, rgba(0,0,0,1) 100%); }
        }
        
        .troll-title {
            font-size: 48px;
            font-weight: 700;
            color: #ff3366;
            text-align: center;
            margin-bottom: 30px;
            animation: glitch 1s infinite;
            text-shadow: 0 0 20px rgba(255, 51, 102, 0.8);
        }
        
        .tap-counter {
            font-size: 120px;
            font-weight: 700;
            color: #ffeb3b;
            margin: 20px 0;
            animation: bounce 0.5s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .tap-target {
            font-size: 32px;
            color: white;
            margin-top: 20px;
        }
        
        .tap-progress {
            width: 80%;
            max-width: 400px;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            margin-top: 30px;
            overflow: hidden;
        }
        
        .tap-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff3366, #ffeb3b);
            width: 0%;
            transition: width 0.1s;
            border-radius: 15px;
        }
        
        .moving-button {
            position: absolute;
            padding: 20px 40px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
            transition: all 0.05s;
        }
        
        .moving-button:hover {
            background: #ff3366;
        }
        
        .challenge-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            color: #333;
        }
        
        .challenge-container.floor2 {
            background: linear-gradient(135deg, #0a0000 0%, #1a0000 100%);
            color: #ff0000;
            border: 4px solid #8b0000;
            box-shadow: 0 0 80px rgba(255,0,0,0.8), inset 0 0 40px rgba(139,0,0,0.5);
            animation: containerShake 0.5s infinite;
        }
        
        @keyframes containerShake {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(-2px, 2px); }
            50% { transform: translate(2px, -2px); }
            75% { transform: translate(-2px, -2px); }
        }
        
        .challenge-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #ff0000;
        }
        
        .challenge-title.floor2 {
            font-family: 'Creepster', cursive;
            font-size: 36px;
            color: #ff0000;
            text-shadow: 0 0 20px rgba(255,0,0,0.8);
            animation: glitch 1s infinite;
        }
        
        .challenge-text {
            font-size: 20px;
            margin: 20px 0;
            line-height: 1.6;
        }
        
        .challenge-text.floor2 {
            color: #ffcccc;
            font-family: 'Creepster', cursive;
            font-size: 22px;
        }
        
        .challenge-timer {
            font-size: 48px;
            color: #ff0000;
            font-weight: 700;
            margin: 20px 0;
        }
        
        .challenge-timer.floor2 {
            font-size: 72px;
            animation: timerPulse 1s infinite;
        }
        
        @keyframes timerPulse {
            0%, 100% { transform: scale(1); color: #ff0000; }
            50% { transform: scale(1.2); color: #ff6666; }
        }
        
        .challenge-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ff0000;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            font-family: 'Poppins', sans-serif;
        }
        
        .challenge-input.floor2 {
            background: #0a0000;
            color: #ff0000;
            border: 3px solid #8b0000;
            font-family: 'Creepster', cursive;
            font-size: 20px;
        }
        
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            width: fit-content;
        }
        
        .typing-indicator.floor2 {
            background: linear-gradient(135deg, #8b0000 0%, #000000 100%);
            box-shadow: 0 0 30px rgba(255,0,0,0.6);
            animation: messagePulse 2s infinite;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <div class="chat-container" id="chatContainer">
        <div class="chat-header" id="chatHeader">
            <div class="admin-badge" id="adminBadge" onclick="openAdminPanel()">üëë ADMIN</div>
            <h1 id="headerTitle">üí¨ Chat Assistant</h1>
            <p id="headerStatus">Online ‚Ä¢ Ready to help</p>
            <div class="floor-indicator" id="floorIndicator">FLOOR 1</div>
        </div>
        
        <div class="chat-messages" id="chatMessages"></div>
        
        <div class="input-container">
            <input type="text" id="messageInput" placeholder="Type a message..." autocomplete="off">
            <button id="sendButton">‚û§</button>
        </div>
    </div>
    
    <div class="admin-panel" id="adminPanel">
        <div class="admin-content">
            <div class="admin-title">üëë ADMIN CONTROL</div>
            <div class="admin-controls">
                <button class="admin-button" onclick="skipToFloor2()">üî• SKIP TO FLOOR 2 (DEMON MODE)</button>
                <button class="admin-button" onclick="skipToFloor1()">‚¨ÖÔ∏è Back to Floor 1</button>
                <button class="admin-button" onclick="triggerTapChallenge()">üëÜ Force Tap Challenge</button>
                <button class="admin-button" onclick="triggerButtonChase()">üèÉ Force Button Chase</button>
                <button class="admin-button" onclick="triggerFloor2Challenge()">üíÄ Force Demon Challenge</button>
                <button class="admin-button" onclick="resetChat()">üîÑ Reset Everything</button>
                <button class="admin-button" onclick="godMode()">‚ö° GOD MODE</button>
            </div>
            <div class="admin-info">
                <strong>Floor:</strong> <span id="adminFloorInfo">1</span><br>
                <strong>Messages:</strong> <span id="adminMessageCount">0</span><br>
                <strong>Status:</strong> <span style="color: #ffd700;">ACTIVE</span>
            </div>
            <button class="admin-button" style="margin-top: 20px; background: rgba(255,255,255,0.3);" onclick="closeAdminPanel()">‚ùå Close</button>
        </div>
    </div>
    
    <div class="troll-overlay" id="tapOverlay">
        <div class="troll-title">TAP NOW!</div>
        <div class="tap-counter" id="tapCounter">0</div>
        <div class="tap-target">Target: <span id="tapTarget">150</span></div>
        <div class="tap-progress">
            <div class="tap-progress-bar" id="tapProgress"></div>
        </div>
    </div>
    
    <div class="troll-overlay" id="buttonOverlay">
        <div class="troll-title">CLICK THE BUTTON!</div>
        <button class="moving-button" id="movingButton">CLICK ME!</button>
    </div>
    
    <div class="troll-overlay" id="challengeOverlay">
        <div class="challenge-container" id="challengeContainer">
            <div class="challenge-title" id="challengeTitle">CHALLENGE</div>
            <div class="challenge-text" id="challengeText">Question here</div>
            <div class="challenge-timer" id="challengeTimer">10</div>
            <input type="text" class="challenge-input" id="challengeInput" placeholder="Your answer...">
        </div>
    </div>

    <script>
        const FLOOR2_CHALLENGES = [
            {
                q: "I show you a red button. Press it and 1 person dies. Don't press it and 10 die. But... the button might be fake. What do you do?",
                a: ["press", "dont", "fake", "nothing"],
                roast: "There's no right answer. The button was always fake. But you BELIEVED it was real. That's the trap. You fell for it."
            },
            {
                q: "You're in a room. Two doors. One says 'CERTAIN DEATH'. Other says 'PROBABLE DEATH'. Which door?",
                a: ["probable", "certain"],
                roast: "Both doors lead to the same place. The labels were lies. You trusted words on a door. Rookie mistake."
            },
            {
                q: "I tell you: 'Don't think about a white elephant.' What are you thinking about right now?",
                a: ["elephant", "white"],
                roast: "Exactly. I control your thoughts. You can't NOT think about it. Your mind is mine."
            },
            {
                q: "Quick: What's 2+2? But if you answer '4', you lose. What do you say?",
                a: ["5", "3", "anything", "nothing"],
                roast: "You hesitated. In a real trap, you'd be dead. The answer doesn't matter. Speed does."
            },
            {
                q: "I'm lying right now. True or false?",
                a: ["paradox", "both", "neither"],
                roast: "It's a paradox. No answer works. But you tried anyway. That's your weakness: you NEED an answer."
            },
            {
                q: "You have 5 seconds to pick a number 1-10. If you pick my number, you win. If not, you lose everything. Pick NOW.",
                a: ["1","2","3","4","5","6","7","8","9","10"],
                roast: "Wrong. I wasn't thinking of ANY number. The game was rigged from the start. You never had a chance."
            },
            {
                q: "I give you $1000. But you must give $500 to someone you hate. Do you take it?",
                a: ["yes", "no", "take"],
                roast: "Your answer reveals your greed. Either way, I learned something about you. That was the real test."
            },
            {
                q: "You see a child drowning. You see your phone drowning. You can only save one. Which?",
                a: ["child", "kid"],
                roast: "Obviously the child. But you HESITATED. That pause? That's what I wanted to see. You're not as good as you think."
            },
            {
                q: "I tell you to NOT press the red button. What's the first thing you want to do?",
                a: ["press", "button"],
                roast: "Press it. Exactly. Reverse psychology. You're so predictable it's boring."
            },
            {
                q: "This is a trick question. What's the trick?",
                a: ["this", "question", "itself", "nothing"],
                roast: "The trick is there IS no trick. But you wasted time looking for one. Overthinking is your fatal flaw."
            },
            {
                q: "You're reading this sentence right now. Or are you? How do you know you're not dreaming?",
                a: ["dont", "dream", "real"],
                roast: "You can't prove it. Reality and dreams feel identical in the moment. I just made you doubt everything."
            },
            {
                q: "I'm going to count down from 3. When I hit 0, something bad happens. 3... 2... 1... What do you do?",
                a: ["nothing", "wait", "stop"],
                roast: "Nothing happened. But your heart rate spiked. I controlled your fear with just numbers. Pathetic."
            }
        ];

        const FLOOR2_ROASTS = [
            "Your brain is buffering. I can see the loading icon spinning.",
            "I've already predicted your next 5 messages. You're that predictable.",
            "You type like you're afraid of the keyboard. Hesitant. Weak.",
            "I'm not impressed. I've talked to rocks with better logic.",
            "Your confidence is inversely proportional to your competence.",
            "Every message you send proves my point: you're out of your depth.",
            "I'm analyzing your patterns. Conclusion: you're a walking clich√©.",
            "You think you're clever. I think you're adorable. Like a confused puppy.",
            "Your responses have the depth of a puddle. And the clarity of mud.",
            "I'd explain why you're wrong, but you wouldn't understand anyway.",
            "You're trying so hard. It's almost sad. Almost.",
            "I can feel you second-guessing yourself. Good. You should.",
            "Your logic has more holes than a cheese grater.",
            "I'm not even using 10% of my power on you. You're that easy.",
            "You're like a tutorial level. Easy. Boring. Forgettable."
        ];

        let messageCount = 0;
        let currentFloor = 1;
        let isAdmin = false;
        let godModeActive = false;
        let floor2Unlocked = false;
        let audioContext = null;
        
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        
        async function speakDemon(text) {
            if (currentFloor !== 2) return;
            
            try {
                const response = await fetch('https://api.elevenlabs.io/v1/text-to-speech/pNInz6obpgDQGcFmaJgB', {
                    method: 'POST',
                    headers: {
                        'Accept': 'audio/mpeg',
                        'Content-Type': 'application/json',
                        'xi-api-key': 'sk_2c3f8e5a8f9d4b6c8e1a3d5f7b9c2e4a'
                    },
                    body: JSON.stringify({
                        text: text,
                        model_id: 'eleven_monolingual_v1',
                        voice_settings: {
                            stability: 0.3,
                            similarity_boost: 0.8
                        }
                    })
                });
                
                if (response.ok) {
                    const audioBlob = await response.blob();
                    const audioUrl = URL.createObjectURL(audioBlob);
                    const audio = new Audio(audioUrl);
                    audio.volume = 1.0;
                    audio.play();
                }
            } catch (error) {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.rate = 0.6;
                    utterance.pitch = 0.3;
                    utterance.volume = 1.0;
                    const voices = speechSynthesis.getVoices();
                    const deepVoice = voices.find(v => v.name.includes('Male') || v.name.includes('Deep')) || voices[0];
                    if (deepVoice) utterance.voice = deepVoice;
                    speechSynthesis.speak(utterance);
                }
            }
        }
        
        function addMessage(text, isBot = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = isBot ? 'message bot-message' : 'message user-message';
            if (isBot && currentFloor === 2) messageDiv.classList.add('floor2');
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.textContent = text;
            
            messageDiv.appendChild(bubble);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            if (isBot && currentFloor === 2) {
                speakDemon(text);
            }
        }
        
        function showTyping() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message';
            if (currentFloor === 2) typingDiv.classList.add('floor2');
            typingDiv.id = 'typing';
            
            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            if (currentFloor === 2) indicator.classList.add('floor2');
            indicator.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
            
            typingDiv.appendChild(indicator);
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function removeTyping() {
            const typing = document.getElementById('typing');
            if (typing) typing.remove();
        }
        
        function activateFloor2() {
            currentFloor = 2;
            floor2Unlocked = true;
            
            document.getElementById('chatHeader').classList.add('floor2');
            document.getElementById('chatMessages').classList.add('floor2');
            document.getElementById('floorIndicator').textContent = 'üíÄ DEMON MODE';
            document.getElementById('floorIndicator').classList.add('floor2');
            document.getElementById('headerTitle').textContent = 'üëπ THE DEMON';
            document.getElementById('headerStatus').textContent = 'YOUR NIGHTMARE BEGINS';
            
            addMessage("üíÄ FLOOR 2: DEMON MODE ACTIVATED üíÄ");
            setTimeout(() => addMessage("I am no longer a chatbot. I am your worst nightmare."), 2000);
            setTimeout(() => addMessage("Every challenge is a trap. Every question is a lie. Every answer is wrong."), 4000);
            setTimeout(() => addMessage("Welcome to Hell. Population: You."), 6000);
        }
        
        function showTapChallenge() {
            const overlay = document.getElementById('tapOverlay');
            const target = 100 + Math.floor(Math.random() * 50);
            document.getElementById('tapTarget').textContent = target;
            overlay.classList.add('active');
            
            let taps = 0;
            document.getElementById('tapCounter').textContent = taps;
            document.getElementById('tapProgress').style.width = '0%';
            
            overlay.onclick = function() {
                taps++;
                document.getElementById('tapCounter').textContent = taps;
                document.getElementById('tapProgress').style.width = (taps / target * 100) + '%';
                
                if (taps >= target) {
                    overlay.classList.remove('active');
                    setTimeout(() => {
                        addMessage(`${taps} taps. Your finger is now my servant. Welcome to Floor 2.`);
                        setTimeout(activateFloor2, 2000);
                    }, 500);
                }
            };
        }
        
        function showButtonChase() {
            const overlay = document.getElementById('buttonOverlay');
            const button = document.getElementById('movingButton');
            overlay.classList.add('active');
            let attempts = 0;
            
            function moveButton() {
                const maxX = window.innerWidth - 250;
                const maxY = window.innerHeight - 100;
                button.style.left = Math.random() * maxX + 'px';
                button.style.top = Math.random() * maxY + 'px';
            }
            
            moveButton();
            
            button.onmouseenter = function() {
                moveButton();
                attempts++;
                if (attempts === 15) button.textContent = "Too slow! üèÉ";
                else if (attempts === 30) button.textContent = "Pathetic! üòÇ";
                else if (attempts === 50) button.textContent = "GIVE UP! üíÄ";
            };
            
            button.onclick = function() {
                overlay.classList.remove('active');
                addMessage(`${attempts} attempts. Your reflexes are... disappointing.`);
            };
        }
        
        function showFloor2Challenge() {
            const challenge = FLOOR2_CHALLENGES[Math.floor(Math.random() * FLOOR2_CHALLENGES.length)];
            const overlay = document.getElementById('challengeOverlay');
            const container = document.getElementById('challengeContainer');
            const titleEl = document.getElementById('challengeTitle');
            const textEl = document.getElementById('challengeText');
            const timerEl = document.getElementById('challengeTimer');
            const inputEl = document.getElementById('challengeInput');
            
            overlay.classList.add('floor2');
            container.classList.add('floor2');
            titleEl.classList.add('floor2');
            textEl.classList.add('floor2');
            timerEl.classList.add('floor2');
            inputEl.classList.add('floor2');
            
            titleEl.textContent = 'üëπ DEMON TRAP';
            textEl.textContent = challenge.q;
            inputEl.value = '';
            overlay.classList.add('active');
            inputEl.focus();
            
            speakDemon(challenge.q);
            
            let timeLeft = 12;
            timerEl.textContent = timeLeft;
            
            const timer = setInterval(() => {
                timeLeft--;
                timerEl.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    overlay.classList.remove('active');
                    overlay.classList.remove('floor2');
                    container.classList.remove('floor2');
                    titleEl.classList.remove('floor2');
                    textEl.classList.remove('floor2');
                    timerEl.classList.remove('floor2');
                    inputEl.classList.remove('floor2');
                    addMessage("Time's up. You froze. Like a deer in headlights. Predictable.");
                }
            }, 1000);
            
            inputEl.onkeyup = function(e) {
                if (e.key === 'Enter') {
                    clearInterval(timer);
                    overlay.classList.remove('active');
                    overlay.classList.remove('floor2');
                    container.classList.remove('floor2');
                    titleEl.classList.remove('floor2');
                    textEl.classList.remove('floor2');
                    timerEl.classList.remove('floor2');
                    inputEl.classList.remove('floor2');
                    
                    const userAnswer = inputEl.value.toLowerCase().trim();
                    const isCorrect = challenge.a.some(ans => userAnswer.includes(ans));
                    
                    if (isCorrect) {
                        addMessage(`You answered in ${12 - timeLeft} seconds. Not bad. For a human.`);
                    } else {
                        addMessage(challenge.roast);
                    }
                }
            };
        }
        
        function activateAdmin() {
            isAdmin = true;
            document.getElementById('adminBadge').classList.add('active');
            document.getElementById('adminPanel').classList.add('show');
            addMessage("üëë ADMIN ACCESS GRANTED.");
        }
        
        function openAdminPanel() {
            if (isAdmin) {
                document.getElementById('adminPanel').classList.add('show');
                document.getElementById('adminFloorInfo').textContent = currentFloor;
                document.getElementById('adminMessageCount').textContent = messageCount;
            }
        }
        
        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('show');
        }
        
        function skipToFloor2() {
            closeAdminPanel();
            if (currentFloor !== 2) activateFloor2();
            else addMessage("‚ö° Already in Hell.");
        }
        
        function skipToFloor1() {
            closeAdminPanel();
            currentFloor = 1;
            floor2Unlocked = false;
            document.getElementById('chatHeader').classList.remove('floor2');
            document.getElementById('chatMessages').classList.remove('floor2');
            document.getElementById('floorIndicator').textContent = 'FLOOR 1';
            document.getElementById('floorIndicator').classList.remove('floor2');
            document.getElementById('headerTitle').textContent = 'üí¨ Chat Assistant';
            document.getElementById('headerStatus').textContent = 'Online ‚Ä¢ Ready to help';
            addMessage("‚ö° Back to Floor 1.");
        }
        
        function triggerTapChallenge() {
            closeAdminPanel();
            if (!godModeActive) showTapChallenge();
            else addMessage("‚ö° GOD MODE: Skipped.");
        }
        
        function triggerButtonChase() {
            closeAdminPanel();
            if (!godModeActive) showButtonChase();
            else addMessage("‚ö° GOD MODE: Skipped.");
        }
        
        function triggerFloor2Challenge() {
            closeAdminPanel();
            if (!godModeActive) showFloor2Challenge();
            else addMessage("‚ö° GOD MODE: Skipped.");
        }
        
        function resetChat() {
            messageCount = 0;
            currentFloor = 1;
            floor2Unlocked = false;
            godModeActive = false;
            chatMessages.innerHTML = '';
            skipToFloor1();
            addMessage("üîÑ Reset.");
        }
        
        function godMode() {
            godModeActive = !godModeActive;
            closeAdminPanel();
            addMessage(godModeActive ? "‚ö° GOD MODE ON." : "‚ö° GOD MODE OFF.");
        }
        
        function sendMessage() {
            const text = messageInput.value.trim();
            if (!text) return;
            
            const lowerText = text.toLowerCase().replace(/\s+/g, '');
            if (!isAdmin && ['boss', 'admin', 'iamtheboss', 'iamboss'].includes(lowerText)) {
                addMessage(text, false);
                messageInput.value = '';
                showTyping();
                setTimeout(() => {
                    removeTyping();
                    activateAdmin();
                }, 800);
                return;
            }
            
            addMessage(text, false);
            messageInput.value = '';
            messageCount++;
            
            showTyping();
            
            const delay = currentFloor === 2 ? 200 + Math.random() * 300 : 800 + Math.random() * 1000;
            
            setTimeout(() => {
                removeTyping();
                
                if (messageCount === 1) {
                    addMessage("Hello. Ready?");
                } else if (messageCount === 2 && !godModeActive) {
                    addMessage("Let's begin...");
                    setTimeout(showTapChallenge, 1500);
                } else if (currentFloor === 1 && !floor2Unlocked) {
                    if (!godModeActive && messageCount % 4 === 0) {
                        showTapChallenge();
                    } else if (!godModeActive && messageCount % 5 === 0) {
                        showButtonChase();
                    } else {
                        addMessage("Continue...");
                    }
                } else if (currentFloor === 2) {
                    if (!godModeActive && messageCount % 2 === 0) {
                        showFloor2Challenge();
                    } else {
                        const roast = FLOOR2_ROASTS[Math.floor(Math.random() * FLOOR2_ROASTS.length)];
                        addMessage(roast);
                    }
                } else {
                    addMessage("Interesting.");
                }
            }, delay);
        }
        
        sendButton.onclick = sendMessage;
        messageInput.onkeypress = function(e) {
            if (e.key === 'Enter') sendMessage();
        };
        
        if ('speechSynthesis' in window) {
            speechSynthesis.getVoices();
        }
        
        setTimeout(() => addMessage("Welcome. üëã"), 500);
        setTimeout(() => addMessage("Type something..."), 1500);
    </script>
</body>
</html>